<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator Sederhana</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body {
      background: linear-gradient(45deg, #6e7dff 0%, #67b26f 100%);
      min-height: 100vh;
      font-family: Arial, sans-serif;
    }
    .calculator-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      backdrop-filter: blur(10px);
      max-width: 480px;
    }
    .display {
      background: linear-gradient(45deg, #2c3e50, #34495e);
      color: white;
      border-radius: 15px;
      padding: 20px;
      font-size: 2.5rem;
      font-weight: bold;
      text-align: right;
      min-height: 100px;
      margin-bottom: 20px;
      overflow: hidden;
      position: relative;
    }
    .display-before {
      font-size: 1.2rem;
      color: #95a5a6;
      min-height: 30px;
      overflow: hidden;
    }
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    .btn-calc {
      height: 70px;
      font-size: 1.5rem;
      font-weight: bold;
      border: none;
      border-radius: 15px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .btn-calc:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.3);}
    .btn-calc:active { transform: translateY(0); box-shadow: 0 2px 4px rgba(0,0,0,0.2);}
    .btn-number { background: linear-gradient(45deg, #ecf0f1, #bdc3c7); color: #2c3e50;}
    .btn-operator { background: linear-gradient(45deg, #3498db, #2980b9); color:white;}
    .btn-equals { background: linear-gradient(45deg, #27ae60, #229954); color:white;}
    .btn-clear { background: linear-gradient(45deg, #e74c3c, #c0392b); color:white;}
    .btn-special { background: linear-gradient(45deg, #9b59b6, #8e44ad); color:white;}
    .btn-zero { grid-column: span 2; }
    .history-toggle {
      background: linear-gradient(45deg, #f39c12, #e67e22);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 8px 16px;
      font-weight: bold;
      margin-bottom: 15px;
      transition: all 0.3s ease;
    }
    .history-panel {
      background: rgba(162, 235, 155, 0.9);
      border-radius: 15px;
      padding: 15px;
      margin-top: 20px;
      max-height: 200px;
      overflow-y: auto;
      display: none;
    }
    .history-item {
      padding: 8px;
      border-bottom: 1px solid #5cb6f3;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <div class="container p-5">
    <div class="row justify-content-center">
      <div class="col-md-6 calculator-container p-4">
        <h1 class="text-center mb-4 text-primary">Kalkulator</h1>
        
        <!-- Tombol Riwayat -->
        <button class="history-toggle w-100 mb-3" id="historyToggle">Riwayat Perhitungan</button>
        <div class="history-panel" id="historyPanel">
          <div id="emptyHistory">Belum ada riwayat perhitungan.</div>
        </div>

        <!-- Display -->
        <div class="display">
          <div class="display-before" id="previousOperation"></div>
          <div id="currentDisplay">0</div>
        </div>

        <!-- Tombol kalkulator -->
        <div class="calculator-grid">
          <!-- Row 1 -->
          <button class="btn-calc btn-clear" onclick="clearCalculator()">C</button>

          <button class="btn-calc btn-special" onclick="deleteLast()">⌫</button>

          <button class="btn-calc btn-special" onclick="appendNumber('.')">.</button>

          <button class="btn-calc btn-operator" onclick="chooseOperation('/')">÷</button>


          <!--Row 2 -->
          <button class="btn-calc btn-number" onclick="appendNumber('7')">7</button>

          <button class="btn-calc btn-number" onclick="appendNumber('8')">8</button>

          <button class="btn-calc btn-number" onclick="appendNumber('9')">9</button>

          <button class="btn-calc btn-operator" onclick="chooseOperation('*')">×</button>


          <!--Row 3 -->
          <button class="btn-calc btn-number" onclick="appendNumber('4')">4</button>

          <button class="btn-calc btn-number" onclick="appendNumber('5')">5</button>

          <button class="btn-calc btn-number" onclick="appendNumber('6')">6</button>

          <button class="btn-calc btn-operator" onclick="chooseOperation('-')">−</button>


          <!-- Row 4 -->
          <button class="btn-calc btn-number" onclick="appendNumber('1')">1</button>

          <button class="btn-calc btn-number" onclick="appendNumber('2')">2</button>

          <button class="btn-calc btn-number" onclick="appendNumber('3')">3</button>

          <button class="btn-calc btn-operator" onclick="chooseOperation('+')">+</button>


           <!-- Row 5 -->
          <button class="btn-calc btn-number btn-zero" onclick="appendNumber('0')">0</button>
          <button class="btn-calc btn-number" onclick="appendToDisplay(`.`)">.</button>
          <button class="btn-calc btn-equals" onclick="calculate()">=</button>
        </div>
      </div>
    </div>
  </div>
</div>
  <script>
     
     
    let currentInput = '0';
    let previousInput = '';
    let operation = null;
    let shouldResetScreen = false;
    let calculationHistory = [];

    
    const currentDisplay = document.getElementById('currentDisplay');
    const previousOperationDisplay = document.getElementById('previousOperation');
    const historyPanel = document.getElementById('historyPanel');
    const emptyHistory = document.getElementById('emptyHistory');
    const historyToggle = document.getElementById('historyToggle');

    
    function appendNumber(value) {
      if (shouldResetScreen) {
        currentInput = value;
        shouldResetScreen = false;
      }  
      
      
        if (currentInput === '0' && value !== '.') {
          currentInput = value;
        } else {
          currentInput += value;
        }
      }
      updateDisplay();
      
    
     
    
    function clearCalculator() {
      currentInput = '0';
      previousInput = '';
      operation = null;
      shouldResetScreen = false;
      updateDisplay();
    }

    function deleteLast() {
      if (currentInput.length === 1) {
        currentInput = '0';
      } else {
        currentInput = currentInput.slice(0, -1);
      }
      updateDisplay();
    }

    function chooseOperation(op) {
      if (currentInput === '0') return;
      if (previousInput !== '') {
        calculate();
      }
      operation = op;
      previousInput = currentInput;
      shouldResetScreen = true;
      updateDisplay();
    }
    
    function calculate() {
      let computation;
      const prev = parseFloat(previousInput);
      const current = parseFloat(currentInput);
      if (isNaN(prev) || isNaN(current)) return;

      switch(operation) {
        case '+': computation = prev + current;
         break;
        case '-': computation = prev - current; 
        break;
        case '*': computation = prev * current;
         break;
        case '/': computation = current === 0 ? 'Error' : prev / current;
         break;
        default:
           return;
      }

      const historyEntry = { 
        operation: `${previousInput} $ (operation) ${currentInput}`,
        result: computation.toString()
      };
      calculationHistory.unshift(historyEntry);
      updateHistory();

      currentInput = computation.toString();
      operation = null;
      previousInput = '';
      shouldResetScreen = true;
      updateDisplay();
    }

    
    function updateDisplay() {
      currentDisplay.textContent = currentInput;
      previousOperationDisplay.textContent =
      `$ {previousInput} ${operation}`;
    }

    function updateHistory() {
      historyPanel.innerHTML = '';
      if (calculationHistory.length === 0) {
        historyPanel.appendChild(emptyHistory);
        return;
      }
      calculationHistory.forEach(item => {
        const div = document.createElement('div');
        div.classList.add('history-item');
        div.textContent = `${item.operation} = $ {item.result}`;
        historyPanel.appendChild(div);
      });
    


    }
   // Keyboard support
document.addEventListener('keydown', (event) => {
if (/[0-9]/.test(event.key)) {
appendToDisplay(event.key);
} else if (event.key === '.') {
appendToDisplay('.');
} else if (event.key === '+') {
chooseOperation('+');
} else if (event.key === '-') {
chooseOperation('-');
} else if (event.key === '*') {
chooseOperation('x');
} else if (event.key === '/') {
chooseOperation('/');
} else if (event.key === 'Enter' || event.key === '=') {
event.preventDefault();
calculate();
} else if (event.key === 'Escape') {
clearCalculator();
} else if (event.key === 'Backspace') {
deleteLast();
}
});
// Initialize
updateDisplay();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
    